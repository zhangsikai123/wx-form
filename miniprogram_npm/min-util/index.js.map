{"version":3,"sources":["index.js","src/index.js","src/lang.js","src/util.js","src/array.js","src/object.js","src/function.js","src/cache.js","src/string.js","src/math.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;;ACDA;AACA;AACA;AACA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA,ACHA;AFOA,ACHA,ACHA;AFOA,ACHA,ACHA;ACFA,AHSA,ACHA,ACHA;ACFA,AHSA,ACHA,ACHA;ACFA,AHSA,ACHA,ACHA;ACFA,AHSA,ACHA,AGTA,AFMA;ACFA,AHSA,ACHA,AGTA,AFMA;ACFA,AHSA,ACHA,AGTA,AFMA;ACFA,AENA,ALeA,ACHA,AGTA,AFMA;ACFA,AENA,ALeA,ACHA,AGTA,AFMA;ACFA,AENA,ALeA,ACHA,AGTA,AFMA;ACFA,AGTA,ADGA,ALeA,ACHA,AGTA,AFMA;ACFA,AGTA,ADGA,ALeA,ACHA,AGTA,AFMA;ACFA,AGTA,ADGA,AJYA,AGTA,AFMA;ACFA,AGTA,ADGA,AJYA,AGTA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AGTA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AGTA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AJYA,AOrBA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AGTA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AGTA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AGTA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AGTA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AGTA,AJYA,AGTA,ALeA;ACFA,AGTA,ADGA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,AGTA,AJYA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA,ALeA;ACFA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA,AGTA;AJaA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["module.exports = require('./src')\n","var cou = require('cou')\n\nmodule.exports = cou.extend(_, cou)\n\nrequire('./lang')(_)\nrequire('./util')(_)\nrequire('./array')(_)\nrequire('./object')(_)\nrequire('./function')(_)\nrequire('./string')(_)\nrequire('./math')(_)\n\n_.mixin(_, _)\n\nfunction _(val) {\n  if (!(this instanceof _)) return new _(val)\n  this.__value = val\n  this.__chain = false\n}\n","module.exports = function(_) {\n\nvar is = _.is\n\n_.isString = is.string\n\n_.isArray = is.array\n\n_.isArrayLike = is.arraylike\n\n_.isBoolean = is.bool\n\n_.isElement = is.element\n\n_.isEmpty = is.empty\n\n_.isFunction = is.fn\n\n_.isInteger = is.integer\n\n_.isNaN = is.nan\n\n_.isNumber = is.number\n\n_.isObject = is.object\n\n_.isPlainObject = is.plainObject\n\n_.isRegExp = is.regexp\n\n_.isString = is.string\n\n_.isUndefined = is.undef\n\n}\n","module.exports = function(_) {\n\nvar is = _.is\n\n_.now = function() {\n  return +new Date\n}\n\n_.constant = function(val) {\n  return function() {\n    return val\n  }\n}\n\n_.identity = function(val) {\n  return val\n}\n\n_.random = function(min, max) {\n  return min + Math.floor(Math.random() * (max - min + 1))\n}\n\n_.mixin = function(dst, src, opt) {\n  var keys = _.functions(src)\n  if (dst) {\n    if (is.fn(dst)) {\n      opt = opt || {}\n      // add to prototype\n      var proto = dst.prototype\n      _.each(keys, function(key) {\n        var fn = src[key]\n        proto[key] = function() {\n          var me = this\n          var args = [me.__value]\n          args.push.apply(args, arguments)\n          var ret = fn.apply(me, args)\n          if (me.__chain) {\n            me.__value = ret\n            return me\n          }\n          return ret\n        }\n      })\n    } else {\n      _.each(keys, function(key) {\n        dst[key] = src[key]\n      })\n    }\n  }\n  return dst\n}\n\n_.chain = function(val) {\n  var ret = _(val)\n  ret.__chain = true\n  return ret\n}\n\n_.value = function() {\n  this.__chain = false\n  return this.__value\n}\n\nvar uniqueId = 0\n\n_.uniqueId = function(prefix) {\n  uniqueId++\n  return _.toString(prefix) + uniqueId\n}\n\n}\n","module.exports = function(_) {\n\nvar each = _.forEach = _.each\nvar includes = _.includes\nvar is = _.is\nvar proto = Array.prototype\n\n_.reject = function(arr, fn) {\n  return _.filter(arr, function(val, i, arr) {\n    return !fn(val, i, arr)\n  })\n}\n\n_.without = function(arr) {\n  var other = _.slice(arguments, 1)\n  return _.difference(arr, other)\n}\n\n_.difference = function(arr, other) {\n  var ret = []\n  _.each(arr, function(val) {\n    if (!includes(other, val)) {\n      ret.push(val)\n    }\n  })\n  return ret\n}\n\n_.pluck = function(arr, key) {\n  return _.map(arr, function(item) {\n    if (item) return item[key]\n  })\n}\n\n_.nth = function(arr, n) {\n  n = getRealIndex(n, arr)\n  n = n || 0\n  var ret\n  if (_.isString(arr)) {\n    ret = arr.charAt(n)\n  } else {\n    ret = arr[n]\n  }\n  return ret\n}\n\n_.first = function(arr) {\n  if (arr) return _.nth(arr, 0)\n}\n\n_.last = function(arr) {\n  var len = _.len(arr)\n  if (len) {\n    return _.nth(arr, len - 1)\n  }\n}\n\n_.asyncMap = function(arr, fn, cb) {\n  // desperate\n  var ret = []\n  var count = 0\n  var hasDone, hasStart\n\n  each(arr, function(arg, i) {\n    hasStart = true\n    fn(arg, function(err, val) {\n      if (hasDone) return\n      count++\n      if (err) {\n        hasDone = true\n        return cb(err)\n      }\n      ret[i] = val\n      if (count == arr.length) {\n        hasDone = true\n        cb(null, ret)\n      }\n    })\n  })\n\n  if (!hasStart) cb(null) // empty\n}\n\n_.uniq = function(arr) {\n  return _.uniqBy(arr)\n}\n\n_.uniqBy = function(arr, fn) {\n  var ret = []\n  var pool = []\n  if (!is.fn(fn)) {\n    fn = null\n  }\n  each(arr, function(item) {\n    var val = item\n    if (fn) {\n      val = fn(item)\n    }\n    if (!includes(pool, val)) {\n      pool.push(val)\n      ret.push(item)\n    }\n  })\n  return ret\n}\n\n_.flatten = function(arrs) {\n  var ret = []\n  each(arrs, function(arr) {\n    if (is.arraylike(arr)) {\n      each(arr, function(item) {\n        ret.push(item)\n      })\n    } else ret.push(arr)\n  })\n  return ret\n}\n\n_.union = function() {\n  return _.uniq(_.flatten(arguments))\n}\n\n_.sampleSize = function(arr, n) {\n  var ret = _.toArray(arr)\n  var len = ret.length\n  var need = Math.min(n || 1, len)\n  for (var i = 0; i < len; i++) {\n    var rand = _.random(i, len - 1)\n    var tmp = ret[rand]\n    ret[rand] = ret[i]\n    ret[i] = tmp\n  }\n  ret.length = need\n  return ret\n}\n\n_.sample = function(arr) {\n  return _.first(_.sampleSize(arr, 1))\n}\n\n_.shuffle = function(arr) {\n  return _.sampleSize(arr, Infinity)\n}\n\n_.compact = function(arr) {\n  return _.filter(arr, _.identity)\n}\n\n_.rest = function(arr) {\n  return _.slice(arr, 1)\n}\n\n_.invoke = function() {\n  var args = arguments\n  var arr = args[0]\n  var fn = args[1]\n  var isFunc = is.fn(fn)\n  args = _.slice(args, 2)\n\n  return _.map(arr, function(item) {\n    if (isFunc) {\n      return fn.apply(item, args)\n    }\n    if (null != item) {\n      var method = item[fn]\n      if (is.fn(method)) {\n        return method.apply(item, args)\n      }\n    }\n  })\n}\n\n_.partition = function(arr, fn) {\n  var hash = _.groupBy(arr, function(val, i, arr) {\n    var ret = fn(val, i, arr)\n    if (ret) return 1\n    return 2\n  })\n  return [hash[1] || [], hash[2] || []]\n}\n\n_.groupBy = function(arr, fn) {\n  var hash = {}\n  _.each(arr, function(val, i, arr) {\n    var ret = fn(val, i, arr)\n    hash[ret] = hash[ret] || []\n    hash[ret].push(val)\n  })\n  return hash\n}\n\n_.range = function() {\n  var args = arguments\n  if (args.length < 2) {\n    return _.range(args[1], args[0])\n  }\n  var start = args[0] || 0\n  var last = args[1] || 0\n  var step = args[2]\n  if (!is.number(step)) {\n    step = 1\n  }\n  var count = last - start\n  if (0 != step) {\n    count = count / step\n  }\n  var ret = []\n  var val = start\n  for (var i = 0; i < count; i++) {\n    ret.push(val)\n    val += step\n  }\n  return ret\n}\n\n_.pullAt = function(arr) {\n  // `_.at` but mutate\n  var indexes = _.slice(arguments, 1)\n  return mutateDifference(arr, indexes)\n}\n\n_.remove = function(arr, fn) {\n  // `_.filter` but mutate\n  var len = _.len(arr) || 0\n  var indexes = []\n  while (len--) {\n    if (fn(arr[len], len, arr)) {\n      indexes.push(len)\n    }\n  }\n  return mutateDifference(arr, indexes)\n}\n\n_.fill = function(arr, val, start, end) {\n  var size = _.size(arr)\n  start = getRealIndex(start, arr) || 0\n  end = getRealIndex(end, arr) || size\n  for (var i = start; i < end; i++) {\n    arr[i] = val\n  }\n  return arr\n}\n\n_.size = function(val) {\n  // size is safe length\n  var size = 0\n  if (val) {\n    var len = val.length\n    if (_.isInteger(len) && len >= 0) {\n      size = len\n    } else if (_.isObject(val)) {\n      size = _.keys(val).length\n    }\n  }\n  return size\n}\n\n// support negative\nfunction getRealIndex(index, arr) {\n  var size = _.size(arr)\n  if (index < 0) {\n    index += size\n  }\n  if (index < 0) {\n    index = 0 // smallest is zero\n  }\n  if (index > size) {\n    index = size // biggest is size, because [start, end)\n  }\n  return index || 0 // default zero\n}\n\nfunction mutateDifference(arr, indexes) {\n  var ret = []\n  var len = _.len(indexes)\n  if (len) {\n    indexes = indexes.sort(function(a, b) {\n      return a - b\n    })\n    while (len--) {\n      var index = indexes[len]\n      ret.push(proto.splice.call(arr, index, 1)[0])\n    }\n  }\n  ret.reverse()\n  return ret\n}\n\n}\n","module.exports = function(_) {\n\nvar is = _.is\nvar forIn = _.forIn\n\n_.only = function(obj, keys) {\n  obj = obj || {}\n  if (is.string(keys)) keys = keys.split(/ +/)\n  return _.reduce(keys, function(ret, key) {\n    if (null != obj[key]) ret[key] = obj[key]\n    return ret\n  }, {})\n}\n\n_.values = function(obj) {\n  return _.map(_.keys(obj), function(key) {\n    return obj[key]\n  })\n}\n\n_.pick = function(obj, fn) {\n  if (!is.fn(fn)) {\n    return _.pick(obj, function(val, key) {\n      return key == fn\n    })\n  }\n  var ret = {}\n  forIn(obj, function(val, key, obj) {\n    if (fn(val, key, obj)) {\n      ret[key] = val\n    }\n  })\n  return ret\n}\n\n_.functions = function(obj) {\n  return _.keys(_.pick(obj, function(val) {\n    return is.fn(val)\n  }))\n}\n\n_.mapKeys = function(obj, fn) {\n  var ret = {}\n  forIn(obj, function(val, key, obj) {\n    var newKey = fn(val, key, obj)\n    ret[newKey] = val\n  })\n  return ret\n}\n\n_.mapObject = _.mapValues = function(obj, fn) {\n  var ret = {}\n  forIn(obj, function(val, key, obj) {\n    ret[key] = fn(val, key, obj)\n  })\n  return ret\n}\n\n// return value when walk through path, otherwise return empty\n_.get = function(obj, path) {\n  path = toPath(path)\n  if (path.length) {\n    var flag = _.every(path, function(key) {\n      if (null != obj) { // obj can be indexed\n        obj = obj[key]\n        return true\n      }\n    })\n    if (flag) return obj\n  }\n}\n\n_.has = function(obj, path) {\n  path = toPath(path)\n  if (path.length) {\n    var flag = _.every(path, function(key) {\n      if (null != obj && is.owns(obj, key)) {\n        obj = obj[key]\n        return true\n      }\n    })\n    if (flag) return true\n  }\n  return false\n}\n\n_.set = function(obj, path, val) {\n  path = toPath(path)\n  var cur = obj\n  _.every(path, function(key, i) {\n    if (is.oof(cur)) {\n      if (i + 1 == path.length) {\n        cur[key] = val\n      } else {\n        var item = cur[key]\n        if (null == item) {\n          // fill value with {} or []\n          var item = {}\n          if (~~key == key) {\n            item = []\n          }\n        }\n        cur = cur[key] = item\n        return true\n      }\n    }\n  })\n  return obj\n}\n\n_.create = (function() {\n  function Object() {} // so it seems like Object.create\n  return function(proto, property) {\n    // not same as Object.create, Object.create(proto, propertyDescription)\n    if ('object' != typeof proto) {\n      // null is ok\n      proto = null\n    }\n    Object.prototype = proto\n    return _.extend(new Object, property)\n  }\n})()\n\n_.defaults = function() {\n  var args = arguments\n  var target = args[0]\n  var sources = _.slice(args, 1)\n  if (target) {\n    _.each(sources, function(src) {\n      _.mapObject(src, function(val, key) {\n        if (is.undef(target[key])) {\n          target[key] = val\n        }\n      })\n    })\n  }\n  return target\n}\n\n_.isMatch = function(obj, src) {\n  var ret = true\n  obj = obj || {}\n  forIn(src, function(val, key) {\n    if (val !== obj[key]) {\n      ret = false\n      return false\n    }\n  })\n  return ret\n}\n\n_.toPlainObject = function(val) {\n  var ret = {}\n  forIn(val, function(val, key) {\n    ret[key] = val\n  })\n  return ret\n}\n\n_.invert = function(obj) {\n  var ret = {}\n  forIn(obj, function(val, key) {\n    ret[val] = key\n  })\n  return ret\n}\n\n// topath, copy from lodash\n\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\n\\\\]|\\\\.)*?)\\2)\\]/g\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\nfunction toPath(val) {\n  if (is.array(val)) return val\n  var ret = []\n  _.toString(val).replace(rePropName, function(match, number, quote, string) {\n    var item = number || match\n    if (quote) {\n      item = string.replace(reEscapeChar, '$1')\n    }\n    ret.push(item)\n  })\n  return ret\n}\n\n}\n","module.exports = function(_) {\n\nvar is = _.is\nvar slice = _.slice\n\n_.bind = function(fn, ctx) {\n  if (is.string(ctx)) {\n    var obj = fn\n    fn = obj[ctx]\n    ctx = obj\n  }\n  if (!is.fn(fn)) return fn\n  var args = slice(arguments, 2)\n  ctx = ctx || this\n  return function() {\n    return fn.apply(ctx, _.flatten([args, arguments]))\n  }\n}\n\n// from lang.js `Function.prototype.inherits`\n// so belong to function\n_.inherits = function(ctor, superCtor) {\n  ctor.super_ = superCtor\n  ctor.prototype = _.create(superCtor.prototype, {\n    constructor: ctor\n  })\n}\n\n_.delay = function(fn, wait) {\n  var args = _.slice(arguments, 2)\n  return setTimeout(function() {\n    fn.apply(this, args)\n  }, wait)\n}\n\n_.before = function(n, fn) {\n  return function() {\n    if (n > 1) {\n      n--\n      return fn.apply(this, arguments)\n    }\n  }\n}\n\n_.once = function(fn) {\n  return _.before(2, fn)\n}\n\n_.after = function(n, fn) {\n  return function() {\n    if (n > 1) {\n      n--\n    } else {\n      return fn.apply(this, arguments)\n    }\n  }\n}\n\n_.throttle = function(fn, wait, opt) {\n  wait = wait || 0\n  opt = _.extend({\n    leading: true,\n    trailing: true,\n    maxWait: wait\n  }, opt)\n  return _.debounce(fn, wait, opt)\n}\n\n_.debounce = function(fn, wait, opt) {\n  wait = wait || 0\n  opt = _.extend({\n    leading: false,\n    trailing: true\n  }, opt)\n  var maxWait = opt.maxWait\n  var lastExec = 0 // wait\n  var lastCall = 0 // just for maxWait\n  var now = _.now()\n  var timer\n\n  if (!opt.leading) {\n    lastExec = now\n  }\n\n  function ifIsCD() {\n    if (now - lastExec > wait) return false\n    if (maxWait && now - lastCall > maxWait) return false\n    return true\n  }\n\n  function exec(fn, ctx, args) {\n    lastExec = _.now() // update last exec\n    return fn.apply(ctx, args)\n  }\n\n  function cancel() {\n    if (timer) {\n      clearTimeout(timer)\n      timer = null\n    }\n  }\n\n  function debounced() {\n    now = _.now() // update now\n    var isCD = ifIsCD()\n    lastCall = now // update last call\n    var me = this\n    var args = arguments\n\n    cancel()\n\n    if (!isCD) {\n      exec(fn, me, args)\n    } else {\n      if (opt.trailing) {\n        timer = _.delay(function() {\n          exec(fn, me, args)\n        }, wait)\n      }\n    }\n  }\n\n  debounced.cancel = cancel\n\n  return debounced\n}\n\nfunction memoize(fn) {\n  var cache = new memoize.Cache\n  function memoized() {\n    var args = arguments\n    var key = args[0]\n    if (!cache.has(key)) {\n      var ret = fn.apply(this, args)\n      cache.set(key, ret)\n    }\n    return cache.get(key)\n  }\n  memoized.cache = cache\n  return memoized\n}\n\nmemoize.Cache = require('./cache')\n\n_.memoize = memoize\n\n_.wrap = function(val, fn) {\n  return function() {\n    var args = [val]\n    args.push.apply(args, arguments)\n    return fn.apply(this, args)\n  }\n}\n\n_.curry = function(fn) {\n  var len = fn.length\n  return setter([])\n\n  function setter(args) {\n    return function() {\n      var arr = args.concat(_.slice(arguments))\n      if (arr.length >= len) {\n        arr.length = len\n        return fn.apply(this, arr)\n      }\n      return setter(arr)\n    }\n  }\n}\n\n}\n","var cou = require('cou')\nvar is = cou.is\n\nmodule.exports = Cache\n\nfunction Cache() {\n  this.data = {}\n}\n\nvar proto = Cache.prototype\n\nproto.has = function(key) {\n  return is.owns(this.data, key)\n}\n\nproto.get = function(key) {\n  return this.data[key]\n}\n\nproto.set = function(key, val) {\n  this.data[key] = val\n}\n\nproto['delete'] = function(key) {\n  delete this.data[key]\n}\n","module.exports = function(_) {\n\n_.tostr = _.toString = tostr // lodash toString\n\nvar indexOf = _.indexOf\n\n_.split = function(str, separator, limit) {\n  str = tostr(str)\n  return str.split(separator, limit)\n}\n\n_.capitalize = function(str) {\n  str = tostr(str)\n  return str.charAt(0).toUpperCase() + str.substr(1).toLowerCase()\n}\n\n_.upperFirst = function(str) {\n  str = tostr(str)\n  return str.charAt(0).toUpperCase() + str.substr(1)\n}\n\n_.lowerFirst = function(str) {\n  str = tostr(str)\n  return str.charAt(0).toLowerCase() + str.substr(1)\n}\n\n_.camelCase = function(str) {\n  str = tostr(str)\n  var arr = str.split(/[^\\w]|_+/)\n  arr = _.map(arr, function(val) {\n    return _.capitalize(val)\n  })\n  return _.lowerFirst(arr.join(''))\n}\n\n_.startsWith = function(str, val) {\n  return 0 == indexOf(str, val)\n}\n\n_.endsWith = function(str, val) {\n  val += '' // null => 'null'\n  return val == _.slice(str, _.len(str) - _.len(val))\n}\n\n_.toLower = _.lower = function(str) {\n  // lodash toLower\n  return tostr(str).toLowerCase()\n}\n\n_.toUpper = _.upper = function(str) {\n  // lodash toUpper\n  return tostr(str).toUpperCase()\n}\n\n_.repeat = function(str, count) {\n  return _.map(_.range(count), function() {\n    return str\n  }).join('')\n}\n\n_.padStart = function(str, len, chars) {\n  str = tostr(str)\n  len = len || 0\n  var delta = len - str.length\n  return getPadStr(chars, delta) + str\n}\n\n_.padEnd = function(str, len, chars) {\n  str = tostr(str)\n  len = len || 0\n  var delta = len - str.length\n  return str + getPadStr(chars, delta)\n}\n\n\nvar htmlEscapes = {\n  '&': '&amp',\n  '<': '&lt',\n  '>': '&gt',\n  '\"': '&quot',\n  \"'\": '&#39'\n}\n\n_.escape = function(str) {\n    return tostr(str).replace(/[&<>\"']/g, function(item) {\n        return htmlEscapes[item] || item\n    })\n}\n\n// 不支持定制 templateSettings\n_.template = function(str) {\n  var arr = ['with(data) {var ret = \"\"']\n  _.each(_.split(str, '<%'), function(x, i) {\n    var two = x.split('%>')\n    if (two[1]) {\n      genJS(_.trim(two[0]))\n      return filter(two[1])\n    }\n    filter(two[0])\n  })\n\n  arr.push('return ret}')\n  var func = new Function('data', arr.join('\\n'))\n  var internalData = {\n    _: _\n  }\n  var ret = function(data) {\n    return func(_.extend({}, internalData, data))\n  }\n  return ret\n\n  function genJS(jsstr) {\n    var first = _.first(jsstr)\n    if (first === '=' || first === '-') {\n      var text = _.slice(jsstr, 1)\n      if (first === '-') {\n        text = '_.escape(' + text + ')'\n      }\n      arr.push('ret += ' + text) // 插入文本\n    } else {\n      arr.push(jsstr)\n    }\n  }\n\n  function filter(html) {\n    arr.push('ret += \"' + html.replace(/('|\"|\\\\)/g, '\\\\$1').replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n') + '\"')\n  }\n}\n\nfunction getPadStr(chars, len) {\n  chars = tostr(chars) || ' ' // '' will never end\n  var count = Math.floor(len / chars.length) + 1\n  return _.repeat(chars, count).slice(0, len)\n}\n\nfunction tostr(str) {\n  if (str || 0 == str) return str + ''\n  return ''\n}\n\n}\n","module.exports = function(_) {\n\n_.sum = function(arr) {\n  return _.reduce(arr, function(sum, val) {\n    return sum + val\n  }, 0)\n}\n\n_.max = function(arr, fn) {\n  var index = -1\n  var data = -Infinity\n  fn = fn || _.identity\n  _.each(arr, function(val, i) {\n    val = fn(val)\n    if (val > data) {\n      data = val\n      index = i\n    }\n  })\n  if (index > -1) {\n    return arr[index]\n  }\n  return data\n}\n\n_.min = function(arr, fn) {\n  var index = -1\n  var data = Infinity\n  fn = fn || _.identity\n  _.each(arr, function(val, i) {\n    val = fn(val)\n    if (val < data) {\n      data = val\n      index = i\n    }\n  })\n  if (index > -1) {\n    return arr[index]\n  }\n  return data\n}\n\n}\n"]}